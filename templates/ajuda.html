<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gest√£o de Pacientes - Ajuda</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='home/css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='alerts/css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='alerts_agendamentos/css/style.css') }}">
    <style id="custom-theme" type="text/css"></style>
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}">
    <style>
        .ajuda-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 30px;
            background: var(--card);
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .ajuda-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary);
        }
        .ajuda-header h1 {
            color: var(--primary);
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .ajuda-header p {
            color: var(--text-muted);
            font-size: 1.1em;
        }
        .pagina-section {
            margin-bottom: 50px;
            padding: 25px;
            background: var(--accent);
            border-radius: 10px;
            border-left: 5px solid var(--primary);
        }
        .pagina-section h2 {
            color: var(--primary);
            font-size: 1.8em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .pagina-section h3 {
            color: var(--secondary);
            font-size: 1.2em;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .pagina-section p {
            color: var(--text);
            line-height: 1.8;
            margin-bottom: 15px;
        }
        .pagina-section ul {
            color: var(--text);
            line-height: 1.8;
            margin-left: 25px;
            margin-bottom: 15px;
        }
        .pagina-section li {
            margin-bottom: 8px;
        }
        .funcionalidade-box {
            background: var(--card);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 3px solid var(--secondary);
        }
        .funcionalidade-box strong {
            color: var(--primary);
            display: block;
            margin-bottom: 5px;
        }
        .link-pagina {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s;
        }
        .link-pagina:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            text-decoration: none;
            color: white;
        }
        .separator {
            border-top: 2px solid var(--border);
            margin: 40px 0;
        }
        .dica-box {
            background: var(--info-light);
            border-left: 4px solid var(--info);
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Top Bar Fixa -->
    <nav class="topbar">
        <div class="topbar-content">
            <div class="topbar-logo">
                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo Sistema Gest√£o Gestante">
                <h3>Gest√£o de Pacientes</h3>
            </div>
            <div class="topbar-links">
                <!-- Gaveta: Pacientes -->
                <div class="topbar-dropdown">
                    <button class="topbar-dropdown-btn">
                        üë• Pacientes
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="topbar-dropdown-content">
                        <a href="/" class="topbar-dropdown-item active">üìä Indicadores</a>
                        <a href="/novo_paciente" class="topbar-dropdown-item">‚ûï Novo Paciente</a>
                        <a href="/pacientes" class="topbar-dropdown-item">üìã Lista de Pacientes</a>
                        <a href="/exportar" class="topbar-dropdown-item">üíæ Exportar</a>
                    </div>
                </div>

                <!-- Gaveta: Profissionais -->
                <div class="topbar-dropdown">
                    <button class="topbar-dropdown-btn">
                        üë®‚Äç‚öïÔ∏è Profissionais
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="topbar-dropdown-content">
                        <a href="/agendamentos" class="topbar-dropdown-item">üìÖ Agendamentos</a>
                        <a href="#" class="topbar-dropdown-item" onclick="alert('Funcionalidade em desenvolvimento'); return false;">üë®‚Äç‚öïÔ∏è Lista de Profissionais</a>
                        <a href="#" class="topbar-dropdown-item" onclick="alert('Funcionalidade em desenvolvimento'); return false;">üìä Relat√≥rios</a>
                    </div>
                </div>

                <!-- Gaveta: Configura√ß√µes -->
                <div class="topbar-dropdown">
                    <button class="topbar-dropdown-btn">
                        ‚öôÔ∏è Configura√ß√µes
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="topbar-dropdown-content">
                        <a href="/bd" class="topbar-dropdown-item">üóÑÔ∏è Banco de Dados</a>
                        <a href="#" class="topbar-dropdown-item" onclick="alert('Funcionalidade em desenvolvimento'); return false;">üîî Notifica√ß√µes</a>
                        <a href="/aparencia" class="topbar-dropdown-item">üé® Apar√™ncia</a>
                    </div>
                </div>

                <!-- Ajuda (n√£o √© gaveta) -->
                <a href="/ajuda" class="topbar-link btn-ajuda">
                    ‚ùì Ajuda
                </a>

                <span id="version-info" class="topbar-version">v{{ version }}</span>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="ajuda-container">
            <div class="ajuda-header">
                <h1>üìö Guia de Funcionalidades</h1>
                <p>Entenda como usar cada p√°gina do sistema</p>
            </div>

            <!-- P√°gina: Indicadores -->
            <div class="pagina-section">
                <h2>üìä Indicadores</h2>
                <p>P√°gina principal que exibe gr√°ficos e estat√≠sticas sobre os pacientes cadastrados.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Gr√°ficos de Indicadores:</strong> Visualize 5 indicadores principais de pr√©-natal em formato de gr√°ficos (pizza, barras, etc.)</li>
                    <li><strong>Abas por Unidade:</strong> Cada unidade de sa√∫de tem sua pr√≥pria aba com gr√°ficos espec√≠ficos</li>
                    <li><strong>Compara√ß√£o entre Unidades:</strong> Selecione m√∫ltiplas unidades e compare indicadores entre elas</li>
                    <li><strong>Compara√ß√£o de Pacientes:</strong> Selecione pacientes espec√≠ficos para comparar seus dados lado a lado</li>
                    <li><strong>Filtros Din√¢micos:</strong> Escolha qualquer campo do banco de dados para criar gr√°ficos personalizados</li>
                </ul>
                <a href="/" class="link-pagina">Acessar Indicadores ‚Üí</a>
            </div>

            <!-- P√°gina: Novo Paciente -->
            <div class="pagina-section">
                <h2>‚ûï Novo Paciente</h2>
                <p>Formul√°rio passo a passo para cadastrar uma nova gestante no sistema.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Wizard de 17 Passos:</strong> Formul√°rio dividido em etapas para facilitar o preenchimento</li>
                    <li><strong>Barra de Progresso:</strong> Visualize quantos passos faltam para completar o cadastro</li>
                    <li><strong>Navega√ß√£o:</strong> Use os bot√µes "Anterior" e "Pr√≥ximo" para navegar entre os passos</li>
                    <li><strong>Valida√ß√£o:</strong> Campos obrigat√≥rios s√£o marcados e validados antes de avan√ßar</li>
                    <li><strong>Salvamento:</strong> Ao finalizar, clique em "Salvar Paciente" para gravar os dados</li>
                </ul>
                <a href="/novo_paciente" class="link-pagina">Acessar Novo Paciente ‚Üí</a>
            </div>

            <!-- P√°gina: Lista de Pacientes -->
            <div class="pagina-section">
                <h2>üìã Lista de Pacientes</h2>
                <p>Visualize e pesquise todos os pacientes cadastrados no sistema.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Busca em Tempo Real:</strong> Digite o nome do paciente na barra de pesquisa para filtrar instantaneamente</li>
                    <li><strong>Cart√µes de Pacientes:</strong> Cada paciente √© exibido em um cart√£o com informa√ß√µes resumidas</li>
                    <li><strong>Pagina√ß√£o:</strong> Navegue entre p√°ginas quando houver muitos pacientes</li>
                    <li><strong>Perfil Detalhado:</strong> Clique em um cart√£o para abrir o perfil completo do paciente em um painel lateral</li>
                    <li><strong>Fechar Perfil:</strong> Use o bot√£o "√ó" ou clique fora do painel para fechar o perfil</li>
                </ul>
                <a href="/pacientes" class="link-pagina">Acessar Lista de Pacientes ‚Üí</a>
            </div>

            <!-- P√°gina: Exportar -->
            <div class="pagina-section">
                <h2>üíæ Exportar</h2>
                <p>Exporte os dados dos pacientes para arquivos Excel, Word ou texto.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Sele√ß√£o de Formato:</strong> Escolha entre Excel (.xlsx), Word (.docx) ou Texto (.txt)</li>
                    <li><strong>Filtros por Unidade:</strong> Selecione uma ou mais unidades de sa√∫de para filtrar os dados exportados</li>
                    <li><strong>Filtros por Campos:</strong> Escolha campos espec√≠ficos para incluir apenas pacientes que tenham esses dados preenchidos</li>
                    <li><strong>Filtros Combinados:</strong> Os filtros funcionam em conjunto (AND) - paciente deve atender todos os crit√©rios</li>
                    <li><strong>Download Autom√°tico:</strong> Ap√≥s selecionar formato e filtros, o arquivo √© baixado automaticamente</li>
                </ul>
                <a href="/exportar" class="link-pagina">Acessar Exportar ‚Üí</a>
            </div>

            <!-- P√°gina: Banco de Dados -->
            <div class="pagina-section">
                <h2>üóÑÔ∏è Banco de Dados</h2>
                <p>Gerencie todos os registros do sistema em formato de tabela.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Tabela Completa:</strong> Visualize todos os pacientes em formato de tabela com todas as colunas</li>
                    <li><strong>Pesquisa:</strong> Use a barra de pesquisa para filtrar por nome ou unidade de sa√∫de</li>
                    <li><strong>Editar Registro:</strong> Clique no √≠cone de l√°pis para editar os dados de um paciente</li>
                    <li><strong>Excluir Registro:</strong> Clique no √≠cone de lixeira para remover um paciente (com confirma√ß√£o)</li>
                    <li><strong>Backup:</strong> Crie uma c√≥pia de seguran√ßa do banco de dados completo</li>
                    <li><strong>Restaurar Backup:</strong> Carregue um backup anterior para restaurar os dados</li>
                    <li><strong>Sincroniza√ß√£o:</strong> Sincronize dados entre m√∫ltiplos servidores na rede</li>
                </ul>
                <a href="/bd" class="link-pagina">Acessar Banco de Dados ‚Üí</a>
            </div>

            <!-- P√°gina: Agendamentos -->
            <div class="pagina-section">
                <h2>üìÖ Agendamentos</h2>
                <p>Sistema completo para gerenciar agendamentos de consultas dos pacientes.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Calend√°rio Mensal:</strong> Visualize todos os agendamentos em um calend√°rio mensal interativo</li>
                    <li><strong>Navega√ß√£o de Meses:</strong> Use os bot√µes "Anterior" e "Pr√≥ximo" para mudar de m√™s</li>
                    <li><strong>Agendamentos do Dia:</strong> Clique em um dia do calend√°rio para ver todos os agendamentos daquele dia</li>
                    <li><strong>Adicionar Agendamento:</strong> Preencha o formul√°rio com paciente, data, hora e tipo de consulta</li>
                    <li><strong>Busca de Paciente:</strong> Digite o nome do paciente para encontrar e selecionar rapidamente</li>
                    <li><strong>Lista de Agendamentos:</strong> Visualize todos os agendamentos em formato de lista</li>
                    <li><strong>Editar/Excluir:</strong> Modifique ou remova agendamentos existentes</li>
                    <li><strong>Hist√≥rico:</strong> Acesse o hist√≥rico completo de agendamentos passados</li>
                </ul>
                <a href="/agendamentos" class="link-pagina">Acessar Agendamentos ‚Üí</a>
            </div>

            <!-- P√°gina: Apar√™ncia -->
            <div class="pagina-section">
                <h2>üé® Apar√™ncia</h2>
                <p>Personalize as cores e o tema visual do sistema.</p>
                
                <h3>Principais Mec√¢nicas:</h3>
                <ul>
                    <li><strong>Editor de Cores:</strong> Altere as cores principais do sistema usando seletores de cor</li>
                    <li><strong>Preview em Tempo Real:</strong> Veja as mudan√ßas instantaneamente no painel de visualiza√ß√£o</li>
                    <li><strong>Grupos de Cores:</strong> Organize as cores por categorias (Principais, Texto, Estados, etc.)</li>
                    <li><strong>Salvar Tema:</strong> D√™ um nome ao tema e salve para uso futuro</li>
                    <li><strong>Resetar:</strong> Volte para o tema padr√£o a qualquer momento</li>
                    <li><strong>Aplicar:</strong> As mudan√ßas s√£o aplicadas imediatamente em todas as p√°ginas</li>
                </ul>
                <a href="/aparencia" class="link-pagina">Acessar Apar√™ncia ‚Üí</a>
            </div>

            <div class="separator"></div>

            <div class="dica-box">
                <strong>üí° Dica:</strong> Use o menu superior para navegar rapidamente entre as p√°ginas. O bot√£o "Ajuda" est√° sempre dispon√≠vel em todas as p√°ginas para consultar este guia.
            </div>
        </div>
    </div>

    <!-- M√≥dulos do sistema -->
    <script src="{{ url_for('static', filename='home/js/theme-manager.js') }}"></script>
    <script src="{{ url_for('static', filename='home/js/home.js') }}"></script>
    <script>
        // Carregar vers√£o do sistema
        async function carregarVersao() {
            try {
                const response = await fetch('/api/version');
                const data = await response.json();
                if (data.success) {
                    const versionElement = document.getElementById('version-info');
                    if (versionElement) {
                        versionElement.textContent = `v${data.version}`;
                        versionElement.title = `Build: ${data.build_date}`;
                    }
                }
            } catch (error) {
                console.error('Erro ao carregar vers√£o:', error);
            }
        }

        // Carregar vers√£o ao carregar a p√°gina
        document.addEventListener('DOMContentLoaded', carregarVersao);
        
        // Garantir que os dropdowns sejam configurados
        function initDropdowns() {
            if (typeof configurarDropdownsTopbar === 'function') {
                configurarDropdownsTopbar();
            } else {
                // Se a fun√ß√£o ainda n√£o estiver dispon√≠vel, tentar novamente ap√≥s um pequeno delay
                setTimeout(initDropdowns, 100);
            }
        }
        
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initDropdowns);
        } else {
            initDropdowns();
        }
    </script>
</body>
</html>
